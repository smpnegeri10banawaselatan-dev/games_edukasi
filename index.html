<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portal Belajar Informatika SMPN 10 BANAWA SELATAN</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { background:#f3f4f6; }
  #loginForm { max-width:350px; margin:auto; margin-top:5%; padding:20px; background:#fff; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.2); }
  .game-item { width:80px; height:80px; margin:5px; cursor:pointer; }
  .drop-target { width:100px; height:100px; margin:5px; border:2px dashed #333; display:inline-block; vertical-align:top; }
</style>
</head>
<body>

<div id="loginForm" class="text-center">
  <img src="smpn10.jpg" class="img-fluid mb-3" alt="Logo Sekolah" style="max-height:80px;">
  <h4 class="mb-3">Login Portal</h4>
  <input type="text" id="username" placeholder="Username" class="form-control mb-2">
  <input type="password" id="password" placeholder="Password" class="form-control mb-2">
  <button class="btn btn-primary w-100" onclick="login()">Login</button>
  <div id="loginMessage" class="mt-2 text-danger"></div>
</div>

<div id="mainContent" style="display:none; padding:20px;">
  <h3>Selamat Datang, <span id="userLabel"></span></h3>
  <div id="quizArea"></div>
  <h4 class="mt-4">Drag & Drop Game</h4>
  <div id="gameArea" class="flex flex-wrap"></div>
</div>

<script>
let currentUser = {};
function login(){
  const username=document.getElementById('username').value;
  const password=document.getElementById('password').value;
  fetch('https://script.google.com/macros/s/AKfycbz57me8p2_VVbQAp5aVWVSMXjG5en2gPxhEL757Kf77IAmmYj_yp2PI_xYbWBRVusKZ/exec',{
    method:'POST',
    body:JSON.stringify({action:'login',username,password})
  }).then(r=>r.json()).then(res=>{
    if(res.success){
      currentUser=res;
      document.getElementById('loginForm').style.display='none';
      document.getElementById('mainContent').style.display='block';
      document.getElementById('userLabel').innerText=res.username;
      loadGameItems();
    }else{
      document.getElementById('loginMessage').innerText=res.message;
    }
  });
}

function loadGameItems(){
  fetch('https://script.google.com/macros/s/YOUR_DEPLOYED_SCRIPT_ID/exec',{
    method:'POST',
    body:JSON.stringify({action:'getGameItems'})
  }).then(r=>r.json()).then(data=>{
    const area=document.getElementById('gameArea');
    area.innerHTML='';
    data.forEach(item=>{
      const img=document.createElement('img');
      img.src=item.Image;
      img.className='game-item';
      img.draggable=true;
      img.ondragstart=e=>e.dataTransfer.setData('text',item.Item);
      area.appendChild(img);

      const target=document.createElement('div');
      target.className='drop-target';
      target.ondragover=e=>e.preventDefault();
      target.ondrop=e=>{
        e.preventDefault();
        const dragged=e.dataTransfer.getData('text');
        if(dragged===item.Target) alert('Benar!');
        else alert('Salah!');
      };
      area.appendChild(target);
    });
  });
}
</script>

</body>
</html>
